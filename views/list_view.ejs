<div class="d-flex align-items-center mb-3">
  <a class="btn btn-outline-secondary" href="/"><i class="bi bi-arrow-left"></i></a>
  <h1 class="ms-2 mb-0"><%= list.name %></h1>
  <div class="ms-auto d-flex gap-2">
    <% if (authed) { %>
      <a class="btn btn-sm btn-outline-primary" href="/list/<%= list.id %>"><i class="bi bi-pencil me-1"></i>Editar</a>
    <% } %>
  </div>
</div>

<% if (!cards.length) { %>
  <div class="alert alert-info">Nenhum card nesta coleção.</div>
<% } %>

<div class="row g-3">
  <% cards.forEach(c => { %>
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <div class="card h-100">
        <a href="/card/<%= c.id %>/view" class="text-decoration-none">
          <img
            class="card-img-top"
            src="<%= normalizeCloudinary(c.photo_url, { width: 900, height: 1200 }) %>"
            alt="<%= c.name %>"
          >
        </a>
        <div class="card-body d-flex flex-column">
          <h6 class="mb-1"><%= c.name %></h6>
          <div class="muted small">
            <div>
              <strong>Nº:</strong>
              <%= c.collection_total ? `${c.card_number}/${c.collection_total}` : (c.card_number || '-') %>
            </div>
            <div><strong>Idioma:</strong> <%= c.language || '-' %></div>
            <div><strong>Condição:</strong> <%= c.condition || '-' %></div>
            <div><strong>Nota:</strong> <%= c.grading_note ?? '-' %></div>
            <div><strong>Tipo:</strong> <%= c.card_type %></div>
            <div>
              <strong>Status:</strong>
              <% if (c.owned) { %>
                <span class="badge bg-success-subtle text-success border">Na coleção</span>
              <% } else { %>
                <span class="badge bg-warning-subtle text-warning border">Desejo</span>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% }) %>
</div>

<!-- Modal de visualização de imagem -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content" style="background: var(--bg-surface);">
      <div class="modal-header">
        <h5 class="modal-title" id="imageModalTitle">Visualização</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body d-flex justify-content-center">
        <img id="imageModalImg" class="img-fluid modal-fullimg border rounded" alt="preview" />
      </div>
    </div>
  </div>
</div>
