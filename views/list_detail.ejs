<div class="d-flex align-items-center mb-3">
  <a class="btn btn-outline-secondary" href="/"><i class="bi bi-arrow-left"></i></a>
  <h1 class="ms-2 mb-0"><%= list.name %></h1>
</div>

<div class="table-responsive">
  <table class="table align-middle row-hover">
    <thead>
      <tr>
        <th style="width:80px">Imagem</th>
        <th>Nome</th>
        <th>Número</th>
        <th>Linguagem</th>
        <th>Condição</th>
        <th>Nota</th>
        <th>Status</th>
        <th>Tipo</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% if (!cards.length) { %>
        <tr><td colspan="9"><div class="alert alert-info mb-0">Nenhum card nesta lista.</div></td></tr>
      <% } %>
      <% cards.forEach(c => { %>
        <tr>
          <td><img src="<%= thumbCloudinary(c.photo_url, 64) %>" class="thumb border" alt="thumb" /></td>
          <td class="fw-medium"><%= c.name %></td>
          <td class="muted"><%= c.collection_total ? `${c.card_number}/${c.collection_total}` : (c.card_number || '-') %></td>
          <td><span class="badge badge-soft rounded-pill"><%= c.language || '-' %></span></td>
          <td><span class="badge bg-secondary-subtle text-body-secondary border"><%= c.condition || '-' %></span></td>
          <td><%= c.grading_note ?? '-' %></td>
          <td>
            <% if (c.owned) { %>
              <span class="badge bg-success-subtle text-success border">Na coleção</span>
            <% } else { %>
              <span class="badge bg-warning-subtle text-warning border">Desejo</span>
            <% } %>
          </td>
          <td><span class="badge bg-info-subtle text-info border"><%= c.card_type %></span></td>
          <td>
            <a class="btn btn-sm btn-outline-primary" href="/card/<%= c.id %>"><i class="bi bi-pencil"></i></a>
            <form class="d-inline" method="post" action="/card/<%= c.id %>?_method=DELETE" onsubmit="return confirm('Remover este card?')">
              <button class="btn btn-sm btn-outline-danger" type="submit"><i class="bi bi-trash"></i></button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  </div>

<div class="card mt-4">
  <div class="card-body">
    <h5 class="card-title">Adicionar novo card</h5>
    <form method="post" action="/list/<%= list.id %>/cards" enctype="multipart/form-data">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Nome</label>
          <input type="text" class="form-control" name="name" required />
        </div>
        <div class="col-md-6">
          <label class="form-label">Imagem</label>
          <input type="file" class="form-control" name="photo" accept="image/*" required />
        </div>
        <div class="col-md-3">
          <label class="form-label">Número</label>
          <input type="text" class="form-control" name="card_number" />
        </div>
        <div class="col-md-3">
          <label class="form-label">Total coleção</label>
          <input type="text" class="form-control" name="collection_total" />
        </div>
        <div class="col-md-3">
          <label class="form-label">Linguagem</label>
          <select class="form-select" name="language">
            <option value=""></option>
            <% LANGUAGES.forEach(l => { %>
              <option value="<%= l %>"><%= l %></option>
            <% }) %>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Condição</label>
          <select class="form-select" name="condition">
            <option value=""></option>
            <% CONDITIONS.forEach(c => { %>
              <option value="<%= c %>"><%= c %></option>
            <% }) %>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Nota</label>
          <input type="number" min="1" max="10" class="form-control" name="grading_note" />
        </div>
        <div class="col-md-3">
          <label class="form-label">Tipo</label>
          <select class="form-select" name="card_type">
            <% CARD_TYPES.forEach(t => { %>
              <option value="<%= t %>"><%= t %></option>
            <% }) %>
          </select>
        </div>
        <div class="col-md-3 d-flex align-items-end">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="ownedNew" name="owned" checked />
            <label class="form-check-label" for="ownedNew">Tenho este card</label>
          </div>
        </div>
        <div class="col-12">
          <button class="btn btn-primary" type="submit">Adicionar</button>
        </div>
      </div>
    </form>
  </div>
  </div>
